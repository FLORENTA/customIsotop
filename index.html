<!DOCTYPE html>
<html>
<head>
	<title> Classement Images </title>
	<meta charset="UTF-8"/>
	<meta name="author" content="Florent Alemany, Wild Code School"/>
	<style>
		/* To take */
		body{
			overflow-y: scroll;
			margin: 0;
			font-family: "arial", sans-serif;
		}
		
		.container_classify{
			position: relative;
			margin: 50px auto;
			height: 50px;
			padding: 0;
			border: 1px solid #c8c8c8;
		}

		#list-categories{
			display: flex;
			flex-wrap: wrap;
			list-style: none;
			height: auto;
			align-items: center;
			margin: 50px auto 0 auto;
			border: 1px solid #c8c8c8;
			padding: 0;
		}

		#list-categories li{
			text-align: center;
			cursor: pointer;
			height: 50px;
			line-height: 50px;
			width: 12.5%;
		}

		#list-categories li:hover{
			background: grey;
			color: #fff;
		}

		.container_classify .article{
			position: absolute;
			transition: opacity 500ms, top 500ms;
			-webkit-transition: opacity 500ms;
			-moz-transition: opacity 500ms;
			opacity: 0;
		}

		.container_classify .article img{
			width: 100%;
		}
		
		@media all and (max-width: 768px){
			#list-categories li{
				width: 100%;
			}
		}
		
		/* end To Take */
		
		footer, 
		p{
			width: 100%;
			color: #fff;
			background: black;
			text-align: center;
			height: 50px;
			line-height: 50px;
			margin: 0;
		}
		
		p{
			transition: opacity 1s;
		}
		
		#getCode{
			height: 300px;
			width: 80%;
			overflow-y: scroll;
			margin: 20px auto;
			border: 1px solid #c8c8c8;
		}
		
		form{
			margin: 20px auto;
			width: 80%;
			display: block;
			background: #fafafa;
			padding: 10px;
		}
		
		label{
			display: block;
		}
		
		form input[type="number"]{
			width: 100px;
			margin: 5px 0;
			height: 25px;
		}

	</style>
</head>
<body>
	<p> Chargement des images en cours. Patienter.</p>
	<form>
		<div>
			<label for="dataCol">Changer le nombre de colonnes (version desktop)</label>
			<input type="number" id="dataCol" min="1" max="9" required/>
		</div>
		<div>	
			<label for="containerWidth">Changer la largeur du container (%)</label>
			<input type="number" min="50" id="containerWidth" max="100" step="10"/>
		</div>	
		<input type="submit"/>
	</form>
	<ul id="list-categories">
        <li id="all"> Tous </li>
		
		<!--- Loop of categories here --->
		
		<li id="rouge">Rouge</li>
		<li id="jaune">Jaune</li>
		<li id="vert">Vert</li>
		<li id="bleu">Bleu</li>
		<li id="violet">Violet</li>
		<li id="blanc">Blanc</li>
		<li id="noir">Noir</li>
		<li id="gris">Gris</li>
		<li id="marron">Marron</li>
		
		<!--- endloop ---->
		
    </ul>
	
	<!--- 
	Attributes for the "container_classify" class container : 
		  data-width : normal width of container for tablets and desktop in % 
		  data-width-mobile : width of container for smartphones in %
		  data-col-large : number of columns for desktops
		  data-col-medium : number of columns for tablets
		  data-col-small : number of columns for smartphone
		  
	Attributes for the article div : 
		  class article : to be be set width the corresponding css above
		  data-category 
    ----->		
	
    <div class="container_classify" data-width="80" data-width-mobile="98" data-col-large="5" data-col-medium="3" data-col-small="1">
		<!--- loop of article and their respective category --->
		<div class="article" data-category="vert">
			<img src="http://maxpixel.freegreatpicture.com/static/photo/1x/Macro-Kiwi-Transmitted-Light-Green-1143717.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="jaune">
			<img src="http://maxpixel.freegreatpicture.com/static/thumb/1x/Spray-Drop-Of-Water-Water-Orange-Liquid-Drip-1048722.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="rouge">
			<img src="http://maxpixel.freegreatpicture.com/static/thumb/1x/Louisiana-Mud-Bugs-Crawfish-South-Food-New-Orleans-169694.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="bleu">
			<img src="http://maxpixel.freegreatpicture.com/static/photo/1x/Colorful-Peacock-Animal-Nature-Bird-Vibrant-Color-2201428.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="bleu">
			<img src="http://maxpixel.freegreatpicture.com/static/photo/1x/Spring-Flower-Flowers-Flower-Violet-Close-Hyacinth-1403653.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="noir">
			<img src="http://maxpixel.freegreatpicture.com/static/photo/1x/Board-Chalk-School-Empty-Slate-Blackboard-916678.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="blanc">
			<img src="http://maxpixel.freegreatpicture.com/static/photo/1x/Mountain-Station-Aiguille-Du-Midi-Chamonix-1602756.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="rouge">
			<img src="http://maxpixel.freegreatpicture.com/static/thumb/1x/Frying-Pan-Kitchen-Cook-Paprika-Frying-Cooked-1816721.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="jaune">
			<img src="http://maxpixel.freegreatpicture.com/static/thumb/1x/Food-French-French-Fries-Eat-1351067.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="blanc">
			<img src="http://maxpixel.freegreatpicture.com/static/photo/1x/Climbing-Mont-Blanc-Mountaineering-Group-Of-People-1198588.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="violet">
			<img src="http://maxpixel.freegreatpicture.com/static/photo/1x/Fruit-Basket-Fruit-Blue-Plums-Violet-Fruits-Plum-1649316.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="violet">
			<img src="http://maxpixel.freegreatpicture.com/static/photo/1x/Sweet-Plums-Eat-Purple-By-Violet-Fruit-Jam-Cook-1584172.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="violet">
			<img src="http://maxpixel.freegreatpicture.com/static/photo/640/Orchid-Flora-Dendrobium-Orchidaceae-Flower-Purple-172206.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="noir">
			<img src="http://maxpixel.freegreatpicture.com/static/photo/1x/Candlelight-Flame-Candle-Background-Light-2038736.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="noir">
			<img src="http://maxpixel.freegreatpicture.com/static/photo/640/Black-White-Truss-Road-Town-Old-Town-Paved-949832.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="vert">
			<img src="http://maxpixel.freegreatpicture.com/static/thumb/1x/Green-Melons-Water-Melons-Watermelon-Fruit-197025.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="vert">
			<img src="http://maxpixel.freegreatpicture.com/static/thumb/1x/Green-Food-Vegetables-Paprika-5358.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="rouge">
			<img src="http://maxpixel.freegreatpicture.com/static/thumb/1x/Fruit-Fresh-Stem-Ripe-Bing-Cherries-Berry-Red-805416.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="rouge">
			<img src="http://maxpixel.freegreatpicture.com/static/thumb/1x/Red-Vegetables-Tomatoes-Food-5356.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="rouge">
			<img src="http://maxpixel.freegreatpicture.com/static/thumb/1x/Red-Sunflower-Red-Helianthus-Red-Annus-Prado-1647906.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="vert">
			<img src="http://maxpixel.freegreatpicture.com/static/thumb/1x/Green-Leaf-Fern-Fern-225486.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="vert">
			<img src="http://maxpixel.freegreatpicture.com/static/thumb/1x/Green-Green-Leaf-Leaf-Summer-Green-Leaves-Nature-910532.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="bleu">
			<img src="http://maxpixel.freegreatpicture.com/static/photo/640/Sky-Half-Moon-Clouds-Blue-187698.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="bleu">
			<img src="http://maxpixel.freegreatpicture.com/static/photo/1x/Space-Blue-Moon-Half-Moon-Sky-Mood-Astronomy-769918.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="bleu">
			<img src="http://maxpixel.freegreatpicture.com/static/photo/1x/High-Fly-Flying-Birds-Wildlife-Migrating-216826.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="bleu">
			<img src="http://maxpixel.freegreatpicture.com/static/photo/1x/Clothes-Peg-Laundry-Spring-Blue-155094.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="bleu">
			<img src="http://maxpixel.freegreatpicture.com/static/photo/1x/Ice-Winter-Blue-1125335.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="rouge">
			<img src="http://maxpixel.freegreatpicture.com/static/thumb/1x/Decoration-Holly-Christmas-December-Red-Grape-179020.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="violet">
			<img src="http://maxpixel.freegreatpicture.com/static/photo/1x/Silhouettes-Dancers-Ballet-Dance-Woman-111705.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="violet">
			<img src="http://maxpixel.freegreatpicture.com/static/thumb/1x/Summer-Cut-Flowers-Plant-Purple-Gerbera-Flowers-8212.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="violet">
			<img src="http://maxpixel.freegreatpicture.com/static/thumb/1x/Purple-Blossom-Common-Akelei-Flower-Bloom-123125.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="violet">
			<img src="http://maxpixel.freegreatpicture.com/static/thumb/1x/Aquatic-Plant-Nature-Blossom-Water-Lily-Bloom-139364.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="noir">
			<img src="http://maxpixel.freegreatpicture.com/static/photo/1x/Reflection-Alarm-Clock-Black-And-White-Clock-Dial-565645.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="noir">
			<img src="http://maxpixel.freegreatpicture.com/static/photo/1x/Office-Pen-Office-Accessories-Lid-Leave-62374.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="noir">
			<img src="http://maxpixel.freegreatpicture.com/static/photo/1x/Cats-Silhouette-Cats-Eyes-Silhouette-Cat-694730.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="blanc">
			<img src="http://maxpixel.freegreatpicture.com/static/photo/1x/Ebro-Delta-Little-Egret-Water-Bird-Martinet-Blanc-2204284.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="blanc">
			<img src="http://maxpixel.freegreatpicture.com/static/photo/1x/Hut-Gouter-Hut-Refuge-Du-Gouter-Modern-Mont-Blanc-1602785.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="jaune">
			<img src="http://maxpixel.freegreatpicture.com/static/thumb/1x/Hot-Air-Balloon-Hot-Air-Balloon-Ride-Balloon-Air-218696.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="jaune">
			<img src="http://maxpixel.freegreatpicture.com/static/thumb/1x/Citrus-Fruit-Lime-Slices-Lime-Citrus-Fruit-Slices-2481346.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="jaune">
			<img src="http://maxpixel.freegreatpicture.com/static/thumb/1x/Sunflower-Yellow-Sunflowers-Flowers-Abruzzo-Summer-76119.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="jaune">
			<img src="http://maxpixel.freegreatpicture.com/static/thumb/1x/Flowers-Spring-Yellow-Tulip-271352.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="gris">
			<img src="http://maxpixel.freegreatpicture.com/static/photo/1x/Madera-Nature-Gris-Curved-Grey-Wood-302463.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="gris">
			<img src="http://maxpixel.freegreatpicture.com/static/thumb/1x/Madera-Nature-Gris-Curved-Grey-Wood-302463.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="marron">
			<img src="http://maxpixel.freegreatpicture.com/static/photo/640/Brown-Chestnut-Tree-Chestnut-Prickly-Autumn-Ripe-1711393.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="marron">
			<img src="http://maxpixel.freegreatpicture.com/static/photo/640/Fruit-Buckeye-Red-Shiny-Autumn-Open-Chestnut-1710788.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<div class="article" data-category="marron">
			<img src="http://maxpixel.freegreatpicture.com/static/photo/1x/Chestnuts-Fall-Brown-Raindrops-994138.jpg"/>
			<!--- Some other divs here ... --->
		</div>
		<!--- endloop --->
    </div>
	
	<div id="getCode" contenteditable="true">
	<b>HTML File</b><br /><br >
	
		&lt;body&gt;<br />

	&lt;ul id="list-categories"&gt;<br />
        &nbsp;&nbsp;&lt;li id="all"&gt; Tous &lt;/li&gt;<br /><br />
		
		&nbsp;&nbsp;&lt;!--- Loop of categories here ---&gt;<br /><br />
		
		&nbsp;&nbsp;&lt;li id="######"&gt;######&lt;/li&gt;<br />
		&nbsp;&nbsp;&lt;li id="######"&gt;######&lt;/li&gt;<br />
		&nbsp;&nbsp;&lt;li id="######"&gt;######&lt;/li&gt;<br />
		&nbsp;&nbsp;&lt;li id="######"&gt;######&lt;/li&gt;<br />
		&nbsp;&nbsp;&lt;li id="######"&gt;######&lt;/li&gt;<br />
		&nbsp;&nbsp;&lt;li id="######"&gt;######&lt;/li&gt;<br />
		&nbsp;&nbsp;&lt;li id="######"&gt;######&lt;/li&gt;<br />
		&nbsp;&nbsp;&lt;li id="######"&gt;######&lt;/li&gt;<br />
		&nbsp;&nbsp;&lt;li id="######"&gt;######&lt;/li&gt;<br /><br />

		&nbsp;&nbsp;&lt;!--- endloop ----&gt;<br />
		
    &lt;/ul&gt;<br /><br />
	
	&lt;!--- <br />
	Attributes for the "container_classify" class container : <br />
		  data-width : normal width of container for tablets and desktop in % <br /> 
		  data-width-mobile : width of container for smartphones in % <br />
		  data-col-large : number of columns for desktops <br />
		  data-col-medium : number of columns for tablets <br />
		  data-col-small : number of columns for smartphone <br /><br />
		  
	Attributes for the article div : <br />
		  class article : to be be set width the corresponding css above <br />
		  data-category <br />
    -----&gt;		<br /><br />
	
    &nbsp;&nbsp;&lt;div class="container_classify" data-width="80" data-width-mobile="98" data-col-large="5" data-col-medium="3" data-col-small="1"&gt; <br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--- loop of articles and their respective category (link with the id in the UL list) ---&gt;<br />
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;div class="article" data-category="##########"&gt;<br />
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;img src="###############"/&gt;<br />
			&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;!--- Some other divs here ... ---&gt;<br />
		&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/div&gt;<br />
	&nbsp;&nbsp;&lt;/div&gt; <br /> <br />
	&lt;/body&gt;<br /> <br />
	
	<b>CSS File</b> <br /> <br />
	
		body{
			overflow-y: scroll;
			margin: 0;
			font-family: "arial", sans-serif;
		}
		
		.container_classify{
			position: relative;
			margin: 50px auto;
			height: 50px;
			padding: 0;
		}

		#list-categories{
			display: flex;
			flex-wrap: wrap;
			list-style: none;
			height: auto;
			align-items: center;
			margin: 50px auto 0 auto;
			border: 1px solid #c8c8c8;
			padding: 0;
		}

		#list-categories li{
			text-align: center;
			cursor: pointer;
			height: 50px;
			line-height: 50px;
			width: 12.5%;
		}

		#list-categories li:hover{
			background: grey;
			color: #fff;
		}

		.container_classify .article{
			position: absolute;
			transition: opacity 500ms, top 500ms;
			-webkit-transition: opacity 500ms;
			-moz-transition: opacity 500ms;
			opacity: 0;
		}

		.container_classify .article img{
			width: 100%;
		}
		
		@media all and (max-width: 768px){
			#list-categories li{
				width: 100%;
			}
		}<br /> <br />
		
	<b>JS File (does not contain the form)</b> <br /> <br />	
	
	var containerElt = document.getElementsByClassName("container_classify")[0];
	var articlesElt = document.querySelectorAll(".article");
	var ulElt = document.getElementById("list-categories");
	var nbOfCols;
	var containerWidth = containerElt.getAttribute("data-width");

	if(window.innerWidth > 1024){
		nbOfCols = containerElt.getAttribute("data-col-large");

	}
	else if(window.innerWidth > 768 && window.innerWidth <= 1024){
		nbOfCols = containerElt.getAttribute("data-col-medium");
	}
	else{
		nbOfCols = containerElt.getAttribute("data-col-small");
		containerWidth = containerElt.getAttribute("data-width-mobile");
	}

	var colWidth = (99 - nbOfCols) / nbOfCols;
	var categoryList = document.querySelectorAll("#list-categories > li");
	var pxOfMargin = window.innerWidth*(containerWidth / 100) / 100;

	containerElt.style.width = containerWidth + "%";
	ulElt.style.width = containerWidth + "%";


	window.addEventListener("load", function() {

		function getData(){
			var id = this.getAttribute("id");
			var selectedArticles;

			articlesElt = document.querySelectorAll(".article");

			for(var l = 0; l < articlesElt.length; ++l){

				articlesElt[l].style.top = "0";
				articlesElt[l].style.left = "0";
				articlesElt[l].style.opacity = "0";
				articlesElt[l].style.transition = "opacity 0ms";
				articlesElt[l].style.webkitTransition = "opacity 0ms";
				articlesElt[l].style.mozTransition = "opacity 0ms";

			}

			if(id !== "all"){
				selectedArticles = document.querySelectorAll("[data-category="+ id +"");
			}
			else{
				selectedArticles = document.querySelectorAll(".article");
			}

			positionImages(selectedArticles);
		}

		categoryList.forEach(function(category){
		   category.addEventListener("click", getData);
		});

		function positionImages(x) {

			for (var i = 0; i < x.length; ++i) {

				x[i].style.width = colWidth + "%";
				
				if(i === 0 || i % nbOfCols === 0){
					x[i].style.left = pxOfMargin + "px";
				}
				else{
					x[i].style.left = x[i - 1].offsetLeft + parseFloat(getComputedStyle(x[i - 1]).width) + pxOfMargin + "px";
				}

				if (i < nbOfCols) {
					x[i].style.top = pxOfMargin + "px";
				}
				else {
					x[i].style.top = x[i - nbOfCols].offsetTop + parseFloat(getComputedStyle(x[i - nbOfCols]).height) + 5 + "px";
				}

				x[i].style.transition = "opacity 500ms";
				x[i].style.webkitTransition = "opacity 500ms";
				x[i].style.mozTransition = "opacity 500ms";
				x[i].style.opacity = "1";

				if(i === x.length - 1){
					var lastRowElts = [];

					if(x.length > nbOfCols) {
						for (var m = 1; m <= nbOfCols; ++m) {
							lastRowElts.push(x[x.length - m].offsetTop + parseFloat(getComputedStyle(x[x.length - m]).height));
						}
					}
					else{
						for (var n = 1; n <= x.length; ++n) {
							lastRowElts.push(x[x.length - n].offsetTop + parseFloat(getComputedStyle(x[x.length - n]).height));
						}
					}

					var nearestToTheBottom = Math.max.apply(null, lastRowElts);

					containerElt.style.height = nearestToTheBottom + 5 + "px";

				}
			}
		}

		positionImages(articlesElt);

	});

	</div>
	<footer> Enjoy ! </footer>

<script type="text/javascript">

	var containerElt = document.getElementsByClassName("container_classify")[0];
	var articlesElt = document.querySelectorAll(".article");
	var ulElt = document.getElementById("list-categories");
	var nbOfCols;
	var pElt = document.querySelector("p");
	var containerWidth = containerElt.getAttribute("data-width");
	var formElt = document.querySelector("form");

	if(window.innerWidth > 1024){
		nbOfCols = containerElt.getAttribute("data-col-large");

	}
	else if(window.innerWidth > 768 && window.innerWidth <= 1024){
		nbOfCols = containerElt.getAttribute("data-col-medium");
	}
	else{
		nbOfCols = containerElt.getAttribute("data-col-small");
		containerWidth = containerElt.getAttribute("data-width-mobile");
	}

	var colWidth = (99 - nbOfCols) / nbOfCols;
	var categoryList = document.querySelectorAll("#list-categories > li");
	var pxOfMargin = window.innerWidth*(containerWidth / 100) / 100;

	containerElt.style.width = containerWidth + "%";
	ulElt.style.width = containerWidth + "%";


	window.addEventListener("load", function() {

		function getData(){
			var id = this.getAttribute("id");

			articlesElt = document.querySelectorAll(".article");

			for(var l = 0; l < articlesElt.length; ++l){

				articlesElt[l].style.top = "0";
				articlesElt[l].style.left = "0";
				articlesElt[l].style.opacity = "0";
				articlesElt[l].style.transition = "opacity 0ms";
				articlesElt[l].style.webkitTransition = "opacity 0ms";
				articlesElt[l].style.mozTransition = "opacity 0ms";

			}

			if(id !== "all"){
				articlesElt = document.querySelectorAll("[data-category="+ id +"");
			}
			else{
				articlesElt = document.querySelectorAll(".article");
			}

			positionImages(articlesElt);
		}

		categoryList.forEach(function(category){
		   category.addEventListener("click", getData);
		});

		function positionImages(x) {

			for (var i = 0; i < x.length; ++i) {

				x[i].style.width = colWidth + "%";
				
				if(i === 0 || i % nbOfCols === 0){
					x[i].style.left = pxOfMargin + "px";
				}
				else{
					x[i].style.left = x[i - 1].offsetLeft + parseFloat(getComputedStyle(x[i - 1]).width) + pxOfMargin + "px";
				}

				if (i < nbOfCols) {
					x[i].style.top = pxOfMargin + "px";
				}
				else {
					x[i].style.top = x[i - nbOfCols].offsetTop + parseFloat(getComputedStyle(x[i - nbOfCols]).height) + 5 + "px";
				}

				x[i].style.transition = "opacity 500ms";
				x[i].style.webkitTransition = "opacity 500ms";
				x[i].style.mozTransition = "opacity 500ms";
				x[i].style.opacity = "1";

				if(i === x.length - 1){
					var lastRowElts = [];

					if(x.length > nbOfCols) {
						for (var m = 1; m <= nbOfCols; ++m) {
							lastRowElts.push(x[x.length - m].offsetTop + parseFloat(getComputedStyle(x[x.length - m]).height));
						}
					}
					else{
						for (var n = 1; n <= x.length; ++n) {
							lastRowElts.push(x[x.length - n].offsetTop + parseFloat(getComputedStyle(x[x.length - n]).height));
						}
					}

					var nearestToTheBottom = Math.max.apply(null, lastRowElts);

					containerElt.style.height = nearestToTheBottom + 5 + "px";

				}
			}
		}

		positionImages(articlesElt);
		
		setTimeout(function(){
			pElt.style.opacity = "0";
		}, 1000);
		
		
	
		function treatForm(e){
			e.preventDefault();
			nbOfCols = this.elements.dataCol.value;
						
			if(this.elements.containerWidth.value){
				containerWidth = this.elements.containerWidth.value;
			}
			
			containerElt.style.width = containerWidth + "%";
			colWidth = (99 - nbOfCols) / nbOfCols;
			pxOfMargin = window.innerWidth*(containerWidth / 100) / 100;
			positionImages(articlesElt);
		}
		
		formElt.addEventListener("submit", treatForm);
	});

</script>
</body>
</html>